{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{AIWriterAPI}from'./api/AIWriterAPI';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext(null);export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubscribedMonthly=_useState6[0],setIsSubscribedMonthly=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSubscribedLifetime=_useState8[0],setIsSubscribedLifetime=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];useEffect(function(){var verifyLoginStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return AIWriterAPI.getAuthStatus();case 3:data=_context.sent;if(data.isLoggedIn){setIsLoggedIn(true);setEmail(data.email||'');setIsSubscribedMonthly(data.isSubscribedMonthly);setIsSubscribedLifetime(data.isSubscribedLifetime);}else{setIsLoggedIn(false);setEmail('');}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setIsLoggedIn(false);setEmail('');case 11:_context.prev=11;setIsLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,7,11,14]]);}));return function verifyLoginStatus(){return _ref2.apply(this,arguments);};}();verifyLoginStatus();},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isLoggedIn:isLoggedIn,email:email,isSubscribedMonthly:isSubscribedMonthly,isSubscribedLifetime:isSubscribedLifetime,isLoading:isLoading,setIsLoggedIn:setIsLoggedIn,setEmail:setEmail,setIsSubscribedMonthly:setIsSubscribedMonthly,setIsSubscribedLifetime:setIsSubscribedLifetime},children:children});};export var useAuth=function useAuth(){var context=useContext(AuthContext);if(context===null){throw new Error('useAuth must be used within an AuthProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AIWriterAPI","jsx","_jsx","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoggedIn","setIsLoggedIn","_useState3","_useState4","email","setEmail","_useState5","_useState6","isSubscribedMonthly","setIsSubscribedMonthly","_useState7","_useState8","isSubscribedLifetime","setIsSubscribedLifetime","_useState9","_useState10","isLoading","setIsLoading","verifyLoginStatus","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","getAuthStatus","sent","t0","finish","stop","apply","arguments","Provider","value","useAuth","context","Error"],"sources":["C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/src/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { AIWriterAPI } from './api/AIWriterAPI';\n\ninterface AuthContextType {\n  isLoggedIn: boolean;\n  email: string;\n  isSubscribedMonthly: boolean;\n  isSubscribedLifetime: boolean;\n  isLoading: boolean;\n  setIsLoggedIn: (value: boolean) => void;\n  setEmail: (value: string) => void;\n  setIsSubscribedMonthly: (value: boolean) => void;\n  setIsSubscribedLifetime: (value: boolean) => void;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [email, setEmail] = useState('');\n  const [isSubscribedMonthly, setIsSubscribedMonthly] = useState(false);\n  const [isSubscribedLifetime, setIsSubscribedLifetime] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const verifyLoginStatus = async () => {\n      // to check if the user is logged in (e.g., checking an auth token)\n      try {\n        const data = await AIWriterAPI.getAuthStatus();\n        if (data.isLoggedIn) {\n          setIsLoggedIn(true);\n          setEmail(data.email || '');\n          setIsSubscribedMonthly(data.isSubscribedMonthly);\n          setIsSubscribedLifetime(data.isSubscribedLifetime);\n        } else {\n          setIsLoggedIn(false);\n          setEmail('');\n        }\n      } catch (error) {\n        setIsLoggedIn(false);\n        setEmail('');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    verifyLoginStatus();\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ isLoggedIn, email, isSubscribedMonthly, isSubscribedLifetime, isLoading, \n                                   setIsLoggedIn, setEmail, setIsSubscribedMonthly, setIsSubscribedLifetime }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === null) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}