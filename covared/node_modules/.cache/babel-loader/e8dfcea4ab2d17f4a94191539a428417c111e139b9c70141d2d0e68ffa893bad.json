{"ast":null,"code":"import _slicedToArray from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _process$env$REACT_AP;import React,{useState,useEffect}from\"react\";import{loadStripe}from'@stripe/stripe-js';import{EmbeddedCheckoutProvider,EmbeddedCheckout}from'@stripe/react-stripe-js';import{AIWriterAPI}from'./../api/AIWriterAPI';import NavBar from'./NavBar';import{useAuth}from'./../AuthContext';import'./LandingPage.css';// Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\n// This is your test public API key.\n// const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY_TEST?? '');\n// This is your live public API key.\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var stripePromise=loadStripe((_process$env$REACT_AP=process.env.REACT_APP_STRIPE_PUBLIC_KEY_LIVE)!==null&&_process$env$REACT_AP!==void 0?_process$env$REACT_AP:'');var Checkout=function Checkout(){var _useAuth=useAuth(),isLoggedIn=_useAuth.isLoggedIn,email=_useAuth.email;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),clientSecret=_useState2[0],setClientSecret=_useState2[1];useEffect(function(){var _localStorage$getItem;var userEmail=isLoggedIn?email:'';var planType=(_localStorage$getItem=localStorage.getItem('selectedPlanType'))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:'';AIWriterAPI.createCheckoutSession(userEmail,planType).then(function(data){setClientSecret(data.clientSecret);}).catch(function(error){return console.error(\"Error in creating checkout session:\",error);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{id:\"checkout\",children:clientSecret&&/*#__PURE__*/_jsx(EmbeddedCheckoutProvider,{stripe:stripePromise,options:{clientSecret:clientSecret},children:/*#__PURE__*/_jsx(EmbeddedCheckout,{})})})]})})});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","loadStripe","EmbeddedCheckoutProvider","EmbeddedCheckout","AIWriterAPI","NavBar","useAuth","jsx","_jsx","jsxs","_jsxs","stripePromise","_process$env$REACT_AP","process","env","REACT_APP_STRIPE_PUBLIC_KEY_LIVE","Checkout","_useAuth","isLoggedIn","email","_useState","_useState2","_slicedToArray","clientSecret","setClientSecret","_localStorage$getItem","userEmail","planType","localStorage","getItem","createCheckoutSession","then","data","catch","error","console","className","children","id","stripe","options"],"sources":["C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/src/components/Checkout.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { loadStripe } from '@stripe/stripe-js';\nimport { EmbeddedCheckoutProvider, EmbeddedCheckout } from '@stripe/react-stripe-js';\nimport { AIWriterAPI } from './../api/AIWriterAPI';\nimport NavBar from './NavBar'; \nimport { useAuth } from './../AuthContext';\nimport './LandingPage.css';\n\n\n// Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\n// This is your test public API key.\n// const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY_TEST?? '');\n// This is your live public API key.\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY_LIVE?? '');\n\n\nconst Checkout: React.FC = () => {\n  const { isLoggedIn, email } = useAuth();\n  const [clientSecret, setClientSecret] = useState('');\n\n  useEffect(() => {\n    const userEmail: string = isLoggedIn ? email : '';\n    const planType = localStorage.getItem('selectedPlanType')?? '';\n    AIWriterAPI.createCheckoutSession(userEmail, planType)\n      .then((data) => {\n        setClientSecret(data.clientSecret);\n      })\n      .catch((error) => console.error(\"Error in creating checkout session:\", error));\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-10\">\n          <NavBar /> \n\t\t\t\t\t<div id=\"checkout\">\n\t\t\t\t\t\t{clientSecret && (\n\t\t\t\t\t\t\t\t<EmbeddedCheckoutProvider\n\t\t\t\t\t\t\t\tstripe={stripePromise}\n\t\t\t\t\t\t\t\toptions={{clientSecret}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<EmbeddedCheckout />\n\t\t\t\t\t\t\t\t</EmbeddedCheckoutProvider>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n  )\n}\n\nexport default Checkout;"],"mappings":"6MAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,mBAAmB,CAC9C,OAASC,wBAAwB,CAAEC,gBAAgB,KAAQ,yBAAyB,CACpF,OAASC,WAAW,KAAQ,sBAAsB,CAClD,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,MAAO,mBAAmB,CAG1B;AACA;AACA;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,GAAM,CAAAC,aAAa,CAAGV,UAAU,EAAAW,qBAAA,CAACC,OAAO,CAACC,GAAG,CAACC,gCAAgC,UAAAH,qBAAA,UAAAA,qBAAA,CAAG,EAAE,CAAC,CAGnF,GAAM,CAAAI,QAAkB,CAAG,QAArB,CAAAA,QAAkBA,CAAA,CAAS,CAC/B,IAAAC,QAAA,CAA8BX,OAAO,CAAC,CAAC,CAA/BY,UAAU,CAAAD,QAAA,CAAVC,UAAU,CAAEC,KAAK,CAAAF,QAAA,CAALE,KAAK,CACzB,IAAAC,SAAA,CAAwCrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IAEpCrB,SAAS,CAAC,UAAM,KAAAyB,qBAAA,CACd,GAAM,CAAAC,SAAiB,CAAGR,UAAU,CAAGC,KAAK,CAAG,EAAE,CACjD,GAAM,CAAAQ,QAAQ,EAAAF,qBAAA,CAAGG,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,UAAAJ,qBAAA,UAAAA,qBAAA,CAAG,EAAE,CAC9DrB,WAAW,CAAC0B,qBAAqB,CAACJ,SAAS,CAAEC,QAAQ,CAAC,CACnDI,IAAI,CAAC,SAACC,IAAI,CAAK,CACdR,eAAe,CAACQ,IAAI,CAACT,YAAY,CAAC,CACpC,CAAC,CAAC,CACDU,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACD,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,GAAC,CAClF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE1B,IAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxB7B,IAAA,QAAK4B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC3B,KAAA,QAAK0B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB7B,IAAA,CAACH,MAAM,GAAE,CAAC,cACfG,IAAA,QAAK8B,EAAE,CAAC,UAAU,CAAAD,QAAA,CAChBd,YAAY,eACXf,IAAA,CAACN,wBAAwB,EACzBqC,MAAM,CAAE5B,aAAc,CACtB6B,OAAO,CAAE,CAACjB,YAAY,CAAZA,YAAY,CAAE,CAAAc,QAAA,cAExB7B,IAAA,CAACL,gBAAgB,GAAE,CAAC,CACM,CAC3B,CACG,CAAC,EACF,CAAC,CACF,CAAC,CACF,CAAC,CAER,CAAC,CAED,cAAe,CAAAa,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}