{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import NavBar from'./NavBar';import{useAuth}from'./../AuthContext';import{AIWriterAPI}from\"../api/AIWriterAPI\";import'./LandingPage.css';import'./LoginPage.css';import'./CheckEmailCode.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var images={logo:{name:\"logo\",image:\"\".concat(process.env.PUBLIC_URL,\"/Images/thumbnail2-nobg.png\")}};var CheckEmailCode=function CheckEmailCode(){var _useAuth=useAuth(),setIsLoggedIn=_useAuth.setIsLoggedIn,setEmail=_useAuth.setEmail,isLoggedIn=_useAuth.isLoggedIn;var _useState=useState(function(){return localStorage.getItem('email')||'';}),_useState2=_slicedToArray(_useState,1),email=_useState2[0];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),code=_useState4[0],setCode=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),shake=_useState10[0],setShake=_useState10[1];var navigate=useNavigate();useEffect(function(){if(isLoggedIn){navigate('/report-writer');}},[]);var handleCodeChange=function handleCodeChange(event){var value=event.target.value.slice(0,6).replace(/[^0-9]/gi,'');setCode(value);setErrorMessage('');setShake(false);};var CheckEmailCodeNavigate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();setIsLoading(true);// Start loading\n_context.prev=2;_context.next=5;return AIWriterAPI.postCode(code,email);case 5:response=_context.sent;if(response['success']){setIsLoggedIn(true);setEmail(email);navigate('/report-writer');}else{setErrorMessage('Wrong verification code, please try again.');setShake(true);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setErrorMessage('An error occurred, please try again.');case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function CheckEmailCodeNavigate(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-container \".concat(shake?'shake':''),children:[/*#__PURE__*/_jsx(\"img\",{src:images.logo.image,alt:images.logo.name,style:{height:'10rem',width:'auto',marginTop:'5rem'}}),/*#__PURE__*/_jsx(\"h1\",{children:\"BreezEd.co.uk\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"You have been sent a 6 digit code\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Please enter it below\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:CheckEmailCodeNavigate,children:[/*#__PURE__*/_jsx(\"input\",{type:\"code\",placeholder:\"Verification Code\",value:code,onChange:handleCodeChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-custom-standard\",disabled:isLoading,children:\"Submit Code\"})]})}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage})]})]})})});};export default CheckEmailCode;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","NavBar","useAuth","AIWriterAPI","jsx","_jsx","jsxs","_jsxs","images","logo","name","image","concat","process","env","PUBLIC_URL","CheckEmailCode","_useAuth","setIsLoggedIn","setEmail","isLoggedIn","_useState","localStorage","getItem","_useState2","_slicedToArray","email","_useState3","_useState4","code","setCode","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState10","shake","setShake","navigate","handleCodeChange","event","value","target","slice","replace","CheckEmailCodeNavigate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","preventDefault","postCode","sent","t0","stop","_x","apply","arguments","className","children","src","alt","style","height","width","marginTop","onSubmit","type","placeholder","onChange","disabled"],"sources":["C:/Users/raylite/Documents/RYA New Back up/Breezed/Code/breezed-react-main/breezed-react-main/src/components/CheckEmailCode.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport NavBar from './NavBar';\nimport { useAuth } from './../AuthContext';\nimport { AIWriterAPI } from \"../api/AIWriterAPI\";\nimport './LandingPage.css';\nimport './LoginPage.css';\nimport './CheckEmailCode.css';\nimport { set } from 'react-ga';\n\nconst images = {\n  logo: { name: \"logo\", image: `${process.env.PUBLIC_URL}/Images/thumbnail2-nobg.png` }, \n};\n\nconst CheckEmailCode: React.FC = () => {\n  const { setIsLoggedIn, setEmail, isLoggedIn } = useAuth();\n  const [email] = useState(() => localStorage.getItem('email') || '');\n  const [code, setCode] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false); \n  const [shake, setShake] = useState(false);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate('/report-writer');\n    }\n  }, []);\n\n  const handleCodeChange = (event: any) => {\n    const value = event.target.value.slice(0, 6).replace(/[^0-9]/gi, '');\n    setCode(value);\n    setErrorMessage(''); \n    setShake(false); \n  };\n\n  const CheckEmailCodeNavigate = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setIsLoading(true); // Start loading\n    try {\n      const response = await AIWriterAPI.postCode(code, email);\n      if (response['success']) {\n        setIsLoggedIn(true);\n        setEmail(email);\n        navigate('/report-writer');\n      } else {\n        setErrorMessage('Wrong verification code, please try again.');\n        setShake(true);\n      }\n    } catch (error) {\n      setErrorMessage('An error occurred, please try again.');\n    }\n    setIsLoading(false);\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-10\">\n          <NavBar /> \n          <div className={`page-container ${shake ? 'shake' : ''}`}>\n            <img src={images.logo.image} alt={images.logo.name} style={{ height: '10rem', width: 'auto', marginTop: '5rem' }} />\n            <h1>BreezEd.co.uk</h1>\n            <h5>You have been sent a 6 digit code</h5>\n            <h5>Please enter it below</h5>\n            <div className=\"login-box\">\n              <form onSubmit={CheckEmailCodeNavigate}>\n                <input type=\"code\" placeholder=\"Verification Code\" value={code} onChange={handleCodeChange}  />\n                <button className='btn btn-custom-standard' disabled={isLoading}>Submit Code</button>\n              </form>\n            </div>\n            {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckEmailCode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}